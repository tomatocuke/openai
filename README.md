### æœ€è¿‘æŒç»­ä¼˜åŒ–ä¸­ï¼Œå–œæ¬¢çš„åŒå­¦ç»™ä¸ªğŸŒŸå…³æ³¨ä¸€ä¸‹
### ä»‹ç»
- åŠŸèƒ½ã€‚é€šè¿‡è°ƒç”¨`OpenAI`æä¾›å¾®ä¿¡å…¬ä¼—å·è‡ªåŠ¨å›å¤æœåŠ¡ã€‚å†…å®¹å¯èƒ½åŠå…¶ç¦»è°±ï¼Œä»…ä¾›å‚è€ƒã€‚
- æ³¨æ„ã€‚æœ‰åˆ«äºç½‘é¡µç‰ˆ`ChatGPT`åŸºäºGPT-3.5ï¼Œæœ¬é¡¹ç›®æ˜¯è°ƒç”¨GPT-3ï¼Œæ²¡é‚£ä¹ˆå¼ºå¤§ã€‚
- ç¼ºé™·ã€‚ä¸æ”¯æŒä¸Šä¸‹æ–‡ï¼›[å¾®ä¿¡é™åˆ¶ï¼Œæœ€ä¹…15såšå‡ºå›å¤](https://developers.weixin.qq.com/doc/offiaccount/Message_Management/Passive_user_reply_message.html)ï¼Œå¯èƒ½è¶…æ—¶ï¼Œå¯ä»¥è¿‡ä¸€ä¼šå„¿å†é—®ä¸€ä¸‹ (ç¼“å­˜ç»“æœ)  
- ä»£ç ã€‚å› ä¸ºåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œæœªä½¿ç”¨æ¡†æ¶ï¼Œåç»­å¯èƒ½ä¼šä¼˜åŒ–ã€‚å¦‚æœä½ æœ‰é—®é¢˜æˆ–è€…ä¼˜åŒ–ç‚¹æ¬¢è¿è”ç³»æˆ‘æ¢è®¨ï¼Œgithubå¯èƒ½ä¸åŠæ—¶æŸ¥çœ‹ï¼ŒåŠ QQ:`772532526`

### å‡†å¤‡
- [OpenAIè´¦å·](https://beta.openai.com) (éœ€è¦æ¢¯å­,æ¥å£ä¸æ˜¯å®Œå…¨å…è´¹ï¼Œåªæ˜¯åˆå§‹èµ é€é‡‘é¢ï¼Œå…·ä½“çœ‹å®˜æ–¹æ–‡æ¡£)
- [å¾®ä¿¡å…¬ä¼—å·](https://mp.weixin.qq.com/)
- æœåŠ¡å™¨ã€åŸŸåã€`Docker`æˆ–`Golang`ç¯å¢ƒ

### æ“ä½œæµç¨‹
1. è·å–`API_KEY`ã€‚[OpenAI](https://beta.openai.com/account/api-keys) ï¼ˆå¦‚æœè®¿é—®è¢«æ‹’ç»ï¼Œæ³¨æ„å…¨å±€ä»£ç†ï¼Œæ‰“å¼€è°ƒè¯•ï¼ŒApplicationæ¸…é™¤LocalStorageååˆ·æ–°ï¼Œå®æµ‹å¯ä»¥ï¼‰
2. è·å–å¾®ä¿¡å…¬ä¼—å·ä»¤ç‰Œ`TOKEN`ï¼š[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/) -> åŸºæœ¬é…ç½® -> ç”Ÿæˆä»¤ç‰Œ 
3. ä½¿ç”¨ä»¥ä¸Šä¸¤ä¸ªå‚æ•°æŒ‰ç…§ä¸‹è¾¹**é¡¹ç›®éƒ¨ç½²**ã€‚
4. è®¾ç½®å…¬ä¼—å·æœåŠ¡å™¨åœ°å€(ç«¯å£å¿…é¡»80æˆ–è€…443)ï¼Œé€šè¿‡nginxä»£ç†åˆ°`http://127.0.0.1:ç«¯å£`. é…ç½®ä¸¾ä¾‹
  ```conf
  server {
    listen 80;
    server_name xxx.com;

    location / {
      # ç•¥
    }

    # ä¸¾ä¾‹9001ç«¯å£ï¼Œå…¬ä¼—å·æœåŠ¡å™¨åœ°å€è®¾ç½®ä¸º http://xxx.com/chatgpt/wx; 
    location /chatgpt/ {
      proxy_pass http://127.0.0.1:9001/;
    }
  }
  ```


### é¡¹ç›®éƒ¨ç½²
> ä¸¾ä¾‹éƒ¨ç½²ç«¯å£ä¸º 9001
> å¯ä»¥ä¸è®¾ç½® WX_TOKENï¼Œä½† API_KEY æ˜¯å¿…é¡»çš„

- Docker
  ```bash
  docker run -p 9001:8080 -e API_KEY=xxx -e WX_TOKEN=xxx -d -v $PWD/log:/app/log tomatocuke/openai
  ```
- Golangè¿è¡Œ
  ```bash 
  git clone https://github.com/tomatocuke/chatgpt.git
  cd chatgpt
  go run main.go -PORT=9001 -API_KEY=xxx -WX_TOKEN=xxx 
  ```

### è¯´æ˜
- æ—¥å¿—ã€‚æŸ¥çœ‹`tail -f ./log/chatgpt.log`
- ç®€å•æµ‹è¯•ã€‚`curl 'http://127.0.0.1:9001/test?msg=ä¸­å›½åœ¨å“ªä¸ªæ´²'` 
- æ¨¡å¼ã€‚åˆ†ä¸¤ç§æ¨¡å¼ï¼Œé»˜è®¤å¿«é€Ÿå›ç­”ï¼Œä½†æ˜¯ç»“æœå¯èƒ½ä¸å…¨é¢ã€‚ æ™®é€šæ¨¡å¼ï¼Œå…¬ä¼—å·é—®é¢˜ä¸­åŠ å…¥`è¯¦ç»†`æˆ–è€…`ä»£ç `æœ€å¤§åŒ–å›å¤ï¼Œtestæ¥å£å¢åŠ `mode=full`å‚æ•°ä»¥è°ƒèŠ‚ï¼Œä¾‹ `curl 'http://127.0.0.1:9001/test?msg=è¯„ä»·ä¸€ä¸‹ä¸‰ä½“&mode=full'`